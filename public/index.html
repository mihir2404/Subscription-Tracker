<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Subscription Tracker</title>
  <!-- Google Fonts: Inter & Poppins -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <!-- Font Awesome for icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="style.css">
  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
    // Set initial theme before page paints
    (function() {
      try {
        var isDark = localStorage.getItem('subscription_tracker_dark') !== '0';
        if (!isDark) document.body.classList.add('light');
      } catch(e) {}
    })();
  </script>
</head>
<body>
  <div class="app-container">
    <header>
      <h1><i class="fa-solid fa-wallet"></i> Subscription Tracker</h1>
      <button id="darkModeToggle" title="Toggle dark mode">
        <i class="fa-solid fa-moon"></i>
      </button>
    </header>
    <main>
      <section class="preloaded-section">
        <h2>Popular Subscriptions</h2>
        <ul id="preloadedList" class="subscription-list"></ul>
      </section>
      <section class="add-section">
        <h2>Add Subscription</h2>
        <form id="subscriptionForm" autocomplete="off">
          <input type="text" id="serviceName" placeholder="App Name" maxlength="50" required>
          <input type="number" id="cost" placeholder="Cost" min="0" step="0.01" required>
          <input type="date" id="renewalDate" required>
          <select id="billingType" required>
            <option value="monthly">Monthly</option>
            <option value="yearly">Yearly</option>
          </select>
          <input type="file" id="iconUpload" accept="image/*">
          <button type="submit" id="addSubscriptionBtn">
            <span>Add</span> <i class="fa-solid fa-plus"></i>
          </button>
        </form>
      </section>
      <section class="user-section">
        <h2>Your Subscriptions</h2>
        <ul id="userList" class="subscription-list"></ul>
      </section>
      <section class="summary-section">
        <div class="totals">
          <span id="totalMonthly">₹0/mo</span> | <span id="totalYearly">₹0/yr</span>
        </div>
        <div class="pie-chart-container">
          <canvas id="pieChart"></canvas>
        </div>
      </section>
    </main>
  </div>
  <script src="app.js"></script>
</body>
</html>
